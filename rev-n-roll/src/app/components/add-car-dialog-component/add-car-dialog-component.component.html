<!-- add-car-dialog-component.component.html -->
<div class="dialog-container">
  <mat-icon class="car-icon">directions_car</mat-icon>
  <h2 class="dialog-title">{{ isEditMode ? 'Edit Car' : 'Add a New Car' }}</h2>
  <form [formGroup]="carForm" (ngSubmit)="onSubmit()" class="form-content">
    <!-- Brand -->
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Brand</mat-label>
      <input matInput formControlName="brand" required>
      <mat-error *ngIf="carForm.get('brand')?.hasError('required')">
        Brand is required
      </mat-error>
      <mat-error *ngIf="carForm.get('brand')?.hasError('minlength')">
        Brand must be at least 2 characters
      </mat-error>
    </mat-form-field>

    <!-- Model -->
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Model</mat-label>
      <input matInput formControlName="model" required>
      <mat-error *ngIf="carForm.get('model')?.hasError('required')">
        Model is required
      </mat-error>
      <mat-error *ngIf="carForm.get('model')?.hasError('minlength')">
        Model must be at least 2 characters
      </mat-error>
    </mat-form-field>

    <!-- Description -->
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Description</mat-label>
      <textarea matInput formControlName="description" rows="3"></textarea>
      <mat-error *ngIf="carForm.get('description')?.hasError('maxlength')">
        Description cannot exceed 500 characters
      </mat-error>
    </mat-form-field>

    <!-- Engine -->
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Engine</mat-label>
      <input matInput formControlName="engine">
      <mat-error *ngIf="carForm.get('engine')?.hasError('maxlength')">
        Engine cannot exceed 50 characters
      </mat-error>
    </mat-form-field>

    <!-- Horsepower -->
    <mat-form-field appearance="fill" class="w-full">
      <mat-label>Horsepower</mat-label>
      <input matInput type="number" formControlName="horsePower" required>
      <mat-error *ngIf="carForm.get('horsePower')?.hasError('required')">
        Horsepower is required
      </mat-error>
      <mat-error *ngIf="carForm.get('horsePower')?.hasError('min')">
        Horsepower must be at least 0
      </mat-error>
      <mat-error *ngIf="carForm.get('horsePower')?.hasError('pattern')">
        Horsepower must be a valid number
      </mat-error>
    </mat-form-field>

    <!-- Buttons -->
    <div class="button-container">
      <button mat-button type="button" class="cancel-button" (click)="onCancel()">Cancel</button>
      <button mat-raised-button type="submit" color="primary" class="submit-button" [disabled]="carForm.invalid || isSubmitting">
        <mat-spinner diameter="20" *ngIf="isSubmitting"></mat-spinner>
        <span *ngIf="!isSubmitting">{{ isEditMode ? 'Update Car' : 'Add Car' }}</span>
      </button>
    </div>
  </form>
</div>